<% tags = Tweet.tag_list(@tweets) %>
<% tags_count = tags["tags_count"] %>
<% tags = tags["tags"] %>

<div class="page-header">
	<h1>Tags found: <em><%= tags.size %></em></h1>
</div>

<table id="tags_table" class="table table-striped table-bordered table-hover dataTable no-footer">
	<thead>
		<tr>
		  <th>Tag</th>
		  <th>Count</th>
		  <th style="min-width: 200px;">Proportion</th>
		</tr>
	</thead>
	
	<tbody>
	<% tags.each do |k, v| %>
		<tr> 
			<td><%= k %></td>
			<td><%= v %></td>
			<td>
				<div class="progress">
					<div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow=
					"<%= 100*v/tags_count %>" aria-valuemin="0" aria-valuemax="100" style=
					"width: <%= 100*v/tags_count %>%;"><span class="sr-only">
						<%= 100*v/tags_count %>% Complete</span></div>
				</div>
			</td>
		</tr>
	<% end %>
	</tbody>
</table>

<script>
$(document).ready(function() {
	$('#tags_table').dataTable({
		"bAutoWidth": false,
		"aaSorting": [[ 1, "desc" ]],
	});	
});
</script>
